<!DOCTYPE html>

<html>

<head>

  <title>Multiplayer Game with Joystick</title>

  <style>

    #gameCanvas {

      border: 1px solid black;

      touch-action: none;

    }

    #joystickContainer {

      display: flex;

      justify-content: center;

      align-items: center;

      height: 200px;

    }

    .joystick {

      display: flex;

      align-items: center;

      justify-content: center;

      width: 100px;

      height: 100px;

      border: 1px solid black;

      border-radius: 50%;

      background-color: lightgray;

      cursor: pointer;

      user-select: none;

    }

  </style>

  <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-app.js"></script>

  <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-database.js"></script>

</head>

<body>

  <canvas id="gameCanvas" width="800" height="600"></canvas>

  <div id="joystickContainer">

    <div id="joystickUp" class="joystick">↑</div>

    <div id="joystickLeft" class="joystick">←</div>

    <div id="joystickRight" class="joystick">→</div>

    <div id="joystickDown" class="joystick">↓</div>

  </div>

  <script>

    // Inisialisasi Firebase

    const firebaseConfig = {

      apiKey: "AIzaSyCTq2VFF-_ZE29TnQEBBdd99w3HG1C-XIM",

      authDomain: "multiplayer-shooter-b56e8.firebaseapp.com",

      projectId: "multiplayer-shooter-b56e8",

      databaseURL: "https://multiplayer-shooter-b56e8-default-rtdb.firebaseio.com/",

    };

    firebase.initializeApp(firebaseConfig);

    const database = firebase.database();

    // Inisialisasi Game Canvas

    const canvas = document.getElementById("gameCanvas");

    const context = canvas.getContext("2d");

    // Menggambar pemain di canvas

    function drawPlayer(x, y) {

      context.clearRect(0, 0, canvas.width, canvas.height);

      context.fillStyle = "red";

      context.fillRect(x, y, 20, 20);

    }

    // Mendapatkan posisi pemain dari Firebase dan menggambar ulang canvas

    function updateGame() {

      database.ref("players").once("value").then((snapshot) => {

        snapshot.forEach((playerSnapshot) => {

          const player = playerSnapshot.val();

          drawPlayer(player.x, player.y);

        });

      });

    }

    // Mengirim posisi pemain ke Firebase

    function sendPosition(x, y) {

      const playerRef = database.ref("players/player1");

      playerRef.set({

        x: x,

        y: y

      });

    }

    // Menggerakkan pemain berdasarkan arah joystick

    function movePlayer(direction) {

      const playerRef = database.ref("players/player1");

      playerRef.once("value").then((snapshot) => {

        const player = snapshot.val();

        let newX = player.x;

        let newY = player.y;

        if (direction === "up") {

          newY -= 10;

        } else if (direction === "down") {

          newY += 10;

        } else if (direction === "left") {

          newX -= 10;

        } else if (direction === "right") {

          newX += 10;

        }

        sendPosition(newX, newY);

      });

    }

    // Menghubungkan event click joystick ke fungsi movePlayer

    document.getElementById("joystickUp").addEventListener("click", () => movePlayer("up"));

    document.getElementById("joystickDown").addEventListener("click", () => movePlayer("down"));

    document.getElementById("joystickLeft").addEventListener("click", () => movePlayer("left"));

    document.getElementById("joystickRight").addEventListener("click", () => movePlayer("right"));

    // Mengupdate game secara periodik

    setInterval(updateGame, 100);

  </script>

</body>

</html>



    

   

